<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <!-- CSS de Bootstrap-->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous" />
        <style>
            @import url("https://fonts.googleapis.com/css2?family=Assistant:wght@300;400;600&display=swap");

            :root {
                --bs-body-font-family: "Assistant", sans-serif;
                --bs-body-color: #eef;
                --bs-body-bg: #003566;
            }

            body {
                background-color: #3d405b;
            }
        </style>
        <title>Introducción al Desarrollo Front End con HTML, CSS y JavaScript</title>
    </head>
    <body>
        <header>
            <div class="container">
                <div class="row pt-5">
                    <div class="col-sm-10 col-md-8 col-lg-6 mx-auto">
                        <h1 class="display-4 text-center py-2">Atentados del 9/11 de 2001</h1>
                        <p class="lead">
                            El 11 de septiembre de 2001, 19 terroristas miembros de al-Qaeda secuestraron cuatro vuelos comerciales. En un ataque coordinado, los terroristas volaron intencionalmente dos aviones hasta las Torres Gemelas en
                            Nueva York y un tercero en el Pentágono en Washington. Un cuarto, aunque se sospecha tenía como blanco el Capitolio o la Casa Blanca, no logró su cometido al ser intervenido por los tripulantes y pasajeros del
                            vuelo 93, cayendo en medio de un campo eriazo.
                        </p>
                        <p>
                            Cerca de 3000 personas fallecieron aquel día, la más grande perdida de vidas resultante de un ataque extranjero en Estados Unidos.
                        </p>
                        <p>
                            De las personas que iban abordo de los aviones comerciales <a href="https://github.com/SheridanErices/Clase-05-05/blob/main/Datos.csv" target="_blank" class="link-light"> todas las 246 fallecieron</a>, podemos
                            obtener algunos datos:
                        </p>
                    </div>
                </div>
            </div>
        </header>

        <main class="container">
            <div class="accordion mx-md-5 my-5 rounded-0" id="accordionExample">
                <!--Edades-->
                <div class="accordion-item rounded-0">
                    <h2 class="accordion-header bg-dark" id="headingOne">
                        <button class="accordion-button rounded-0" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">Primer gráfico</button>
                    </h2>
                    <div id="collapseOne" class="accordion-collapse collapse" aria-labelledby="headingOne" data-bs-parent="#accordionExample">
                        <div class="accordion-body text-black-50">

                            <canvas id="poredades" width="100" height="100" class="m-5"></canvas>
                        </div>
                    </div>
                </div>
                <!--Vuelos divididos por sexo-->
                <div class="accordion-item rounded-0">
                    <h2 class="accordion-header" id="headingTwo">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">Segundo gráfico</button>
                    </h2>
                    <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo" data-bs-parent="#accordionExample">
                        <div class="accordion-body text-black-50">
                            <p>
                                De un total de 246 personas, en el primer vuelo en chocar, iban <span id="HvueloUno"></span> hombres y <span id="MvueloUno"></span> mujeres. En el segundo vuelo, iban <span id="HvueloDos"></span> hombres
                                abordo y <span id="MvueloDos"></span> mujeres. Por otro lado, en el tercer vuelo que cayó en el Pentágono, habían <span id="HvueloTres"></span> hombres y <span id="MvueloTres"></span> mujeres. Por último, en
                                el cuarto vuelo que cayó en Pensilvania, iban <span id="HvueloCuatro"></span> hombres abordo y <span id="MvueloCuatro">mujeres.</span>
                            </p>
                            <canvas id="VuelosPorSexo" width="100" height="100" class="m-5"></canvas>
                        </div>
                    </div>
                </div>
                <!--Tipos-->
                <div class="accordion-item rounded-0">
                    <h2 class="accordion-header" id="headingThree">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">Tercer gráfico</button>
                    </h2>
                    <div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree" data-bs-parent="#accordionExample">
                        <div class="accordion-body text-black-50">
                            <p>Contando los cuatro aviones que fueron raptados aquel día, dentro iban <span id="crew"></span> personas pertenecientes a la tripulación, mientras que pasajeros iban <span id="pasajeros"></span>.</p>
                            <canvas id="Tipos" width="100" height="100" class="m-5"></canvas>
                        </div>
                    </div>
                </div>
                <!--Vuelos-->
                <div class="accordion-item rounded-0">
                    <h2 class="accordion-header" id="headingFour">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFour" aria-expanded="false" aria-controls="collapseFour">Cuarto gráfico</button>
                    </h2>
                    <div id="collapseFour" class="accordion-collapse collapse" aria-labelledby="headingFour" data-bs-parent="#accordionExample">
                        <div class="accordion-body text-black-50">
                            <p>
                                Aquel día, todas las personas abordo de los aviones fallecieron, en el vuelo 11 de American Airlines, se encontraban <span id="primervuelo"></span> personas. En el vuelo 175, también de American Airlines,
                                habían <span id="segundovuelo"></span> personas. En el tercer vuelo en caer, el F-77 de United Airlines, iban <span id="tercervuelo"></span> personas. El último, de United Airlines, tenía
                                <span id="cuartovuelo"></span> personas a bordo.
                            </p>
                            <canvas id="todos_vuelos" width="100" height="100" class="m-5"></canvas>
                        </div>
                    </div>
                </div>
                <!--Tipos divididos por sexo-->
                <div class="accordion-item rounded-0">
                    <h2 class="accordion-header" id="headingFive">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFive" aria-expanded="false" aria-controls="collapseFive">Quinto gráfico</button>
                    </h2>
                    <div id="collapseFive" class="accordion-collapse collapse" aria-labelledby="headingFive" data-bs-parent="#accordionExample">
                        <div class="accordion-body text-black-50">
                            <p>
                                La tripulación abordo era considerablemente menor que los pasajeros, dentro de los cuales, <span id="Hcrew"></span> eran hombres y <span id="Mcrew"></span> mujeres. En cuanto a los pasajeros
                                <span id="Hpasajeros"></span> eran hombres y <span id="Mpasajeros"></span> mujeres.
                            </p>
                            <canvas id="TiposPorSexos" width="100" height="100" class="m-5"></canvas>
                        </div>
                    </div>
                </div>
                <!--Fin-->
            </div>
            <div class="row">
                <div class="col-sm-10 col-md-8 col-lg-6 mx-auto">
                    <p>Tras el ataque terrorista ninguna de las personas abordo en los cuatro aviones sobrevivió.</p>
                </div>
            </div>
        </main>

        <aside>
            <div class="container">
                <div class="row py-5">
                    <div class="col-sm-10 col-md-8 col-lg-6 mx-auto small text-center">
                        <p>
                            Fuentes: <a href="https://historia.nationalgeographic.com.es/a/historia-titanic-tragedia-barco-insumergible_16344">La historia del Titanic, la tragedia del barco insumergible</a>,
                            <a href="https://rpubs.com/paraneda/titanic">RPubs - Titanic</a>, otra y otra más.
                        </p>
                    </div>
                </div>
            </div>
        </aside>

        <footer>
            <div class="container">
                <div class="row">
                    <div class="col"><p class="text-muted mt-5 text-center small">Bootstrap v5.1 y Charts.js</p></div>
                </div>
            </div>
        </footer>

        <!-- Biblioteca de Bootstrap -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
        <!-- Biblioteca Chart.js -->
        <script
            src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.1/chart.min.js"
            integrity="sha512-QSkVNOCYLtj73J4hbmVoOV6KVZuMluZlioC+trLpewV8qMjsWqlIQvkn1KGX2StWvPMdWGBqim1xlC8krl1EKQ=="
            crossorigin="anonymous"
            referrerpolicy="no-referrer"
        ></script>
        <script>
            async function todo() {
                //el fetch
                const consulta = await fetch("https://raw.githubusercontent.com/SheridanErices/Clase-05-05/main/datos.json");
                const data = await consulta.json();
                //algunas variables para calcular
                var edades = [];

                var vueloUnoH = 0;
                var vueloUnoM = 0;
                var vueloDosH = 0;
                var vueloDosM = 0;
                var vueloTresH = 0;
                var vueloTresM = 0;
                var vueloCuatroH = 0;
                var vueloCuatroM = 0;

                var cuantosCrew = 0;
                var cuantosPasajeros = 0;

                var vueloUno = 0;
                var vueloDos = 0;
                var vueloTres = 0;
                var vueloCuatro = 0;

                var crewH = 0;
                var crewM = 0;
                var pasajerosH = 0;
                var pasajerosM = 0;

                data.forEach((d) => {
                    edades.push(d.Age);

                    if (d.Flight == 11 && d.Sex == "Male") {
                        vueloUnoH = vueloUnoH + 1;
                    } else if (d.Flight == 11 && d.Sex == "Female") {
                        vueloUnoM = vueloUnoH + 1;
                    }
                    if (d.Flight == 175 && d.Sex == "Male") {
                        vueloDosH = vueloDosH + 1;
                    } else if (d.Flight == 175 && d.Sex == "Female") {
                        vueloDosM = vueloDosM + 1;
                    }

                    if (d.Flight == 77 && d.Sex == "Male") {
                        vueloTresH = vueloTresH + 1;
                    } else if (d.Flight == 77 && d.Sex == "Female") {
                        vueloTresM = vueloTresM + 1;
                    }

                    if (d.Flight == 93 && d.Sex == "Male") {
                        vueloCuatroH = vueloCuatroH + 1;
                    } else if (d.Flight == 93 && d.Sex == "Female") {
                        vueloCuatroM = vueloCuatroM + 1;
                    }

                    if (d.Type == "Crew") {
                        cuantosCrew = cuantosCrew + 1;
                    } else if (d.Type == "Passenger") {
                        cuantosPasajeros = cuantosPasajeros + 1;
                    }

                    if (d.Flight == 11) {
                        vueloUno = vueloUno + 1;
                    } else if (d.Flight == 175) {
                        vueloDos = vueloDos + 1;
                    } else if (d.Flight == 77) {
                        vueloTres = vueloTres + 1;
                    } else {
                        vueloCuatro = vueloCuatro + 1;
                    }

                    if (d.Type == "Passenger" && d.Sex == "Male") {
                        pasajerosH = pasajerosH + 1;
                    } else if (d.Type == "Passenger" && d.Sex == "Female") {
                        pasajerosM = pasajerosM + 1;
                    }
                    if (d.Type == "Crew" && d.Sex == "Male") {
                        crewH = crewH + 1;
                    } else if (d.Type == "Crew" && d.Sex == "Female") {
                        crewM = crewM + 1;
                    }
                });
                console.log(crewH);
                console.log(crewM);
                console.log(pasajerosH);
                console.log(pasajerosM);

                console.log(edades);

                var edadesreales = edades.filter((e) => {
                    return e != null;
                });

                document.querySelector("#HvueloUno").innerHTML = vueloUnoH;
                document.querySelector("#MvueloUno").innerHTML = vueloUnoM;
                document.querySelector("#HvueloDos").innerHTML = vueloDosH;
                document.querySelector("#MvueloDos").innerHTML = vueloDosM;
                document.querySelector("#HvueloTres").innerHTML = vueloTresH;
                document.querySelector("#MvueloTres").innerHTML = vueloTresM;
                document.querySelector("#HvueloCuatro").innerHTML = vueloCuatroH;
                document.querySelector("#MvueloCuatro").innerHTML = vueloCuatroM;

                document.querySelector("#crew").innerHTML = cuantosCrew;
                document.querySelector("#pasajeros").innerHTML = cuantosPasajeros;

                document.querySelector("#primervuelo").innerHTML = vueloUno;
                document.querySelector("#segundovuelo").innerHTML = vueloDos;
                document.querySelector("#tercervuelo").innerHTML = vueloTres;
                document.querySelector("#cuartovuelo").innerHTML = vueloCuatro;

                document.querySelector("#Hcrew").innerHTML = crewH;
                document.querySelector("#Mcrew").innerHTML = crewM;

                document.querySelector("#Hpasajeros").innerHTML = pasajerosH;
                document.querySelector("#Mpasajeros").innerHTML = pasajerosM;

                var menores = [];
                var juventud = [];
                var adultez = [];
                var mayores = [];
                var vejez = [];

                edadesreales.forEach((e) => {
                    if (e < 17) {
                        menores.push(e);
                    } else if (e > 16 && e < 31) {
                        juventud.push(e);
                    } else if (e > 30 && e < 61) {
                        adultez.push(e);
                      } else if (e > 60 && e < 71) {
                          mayores.push(e);
                    } else {
                        vejez.push(e);
                    }
                });

                console.log(menores.length);
                console.log(juventud.length);
                console.log(adultez.length);
                console.log(mayores.length);
                console.log(vejez.length);



                new Chart(document.getElementById("Tipos").getContext("2d"), {
                    type: "doughnut",
                    data: {
                        labels: ["Tripulación", "Pasajeros"],
                        datasets: [{ data: [cuantosCrew, cuantosPasajeros], label: "Tripulantes y pasajeros", backgroundColor: ["#f4f1de", "#e07a5f"] }],
                    },
                });

                new Chart(document.getElementById("VuelosPorSexo").getContext("2d"), {
                    type: "bar",
                    data: {
                        labels: ["Vuelo 11", "Vuelo 175", "Vuelo 77", "Vuelo 93"],
                        datasets: [
                            { data: [vueloUnoH, vueloDosH, vueloTresH, vueloCuatroH], label: "Hombres", backgroundColor: ["#81b29a"] },
                            { data: [vueloUnoM, vueloDosM, vueloTresM, vueloCuatroM], label: "Mujeres", backgroundColor: ["#f2cc8f"] },
                        ],
                    },
                    options: {
                        indexAxis: "y",
                    },
                });

                new Chart(document.getElementById("poredades").getContext("2d"), {
                    type: "pie",
                    data: {
                        labels: ["Menores", "Adultos jóvenes", "Adultos", "Adultos Mayores", "Tercera Edad"],
                        datasets: [{ data: [menores.length, juventud.length, adultez.length, mayores.length, vejez.length], label: "Edades de víctimas", backgroundColor: ["#f4f1de", "#e07a5f", "#81b29a", "#3d405b", "#f2cc8f"] }],
                    },
                });

                new Chart(document.getElementById("todos_vuelos").getContext("2d"), {
                    type: "pie",
                    data: {
                        labels: ["Vuelo 11", "Vuelo 175", "Vuelo 77", "Vuelo 93"],
                        datasets: [{ data: [vueloUno, vueloDos, vueloTres, vueloCuatro], label: "Vuelos", backgroundColor: ["#f4f1de", "#e07a5f", "#81b29a", "#3d405b"] }],
                    },
                });

                new Chart(document.getElementById("TiposPorSexos").getContext("2d"), {
                    type: "bar",
                    data: {
                        labels: ["Tripulación", "Pasajeros"],
                        datasets: [
                            { data: [crewH, pasajerosH], label: "Hombres", backgroundColor: ["#81b29a"] },

                            { data: [crewM, pasajerosM], label: "Mujeres", backgroundColor: ["#f2cc8f"] },
                        ],
                    },
                });
            }
            todo().catch((error) => console.error(error));
        </script>
    </body>
</html>
